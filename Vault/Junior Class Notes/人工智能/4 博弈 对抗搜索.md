# 5 对抗搜索问题
--- 
#重新整理和回顾#
## 博弈
讨论的是竞争环境
我们在本章研究有完整信息的，确定性的，轮流行动的零和博弈。
即：
> 零和博弈
> 同样的棋局实例的情况下，所有棋手的总收益都一样的情况

- 博弈环境下的组成部分：
初始状态 转移模型 终止测试 效用函数

概念解释：
- 剪枝：允许在搜索树中忽略不影响最后决定的部分 
- 评估函数：允许在不进行完全搜索的情况下估计某状态的真实效用值

### 博弈树
**博弈树就是一棵与或树**

MAX
MIN
利用极小极大算法为MAX一方提供最大走棋招数
- 初始状态，actions函数和results函数定义了游戏的博弈树

## 优化策略
什么是优化策略？
即：最优解达到目标状态的一系列行动。终止状态即为获胜。
- 给定一棵博弈树，最优策略可以通过检查每个节点的极小极大值来决定
- 节点的极大极小值就是对应状态的效用值

### **极小极大算法**
- 极小极大值：最优策略在每一个节点的检查值
注：极小极大值指的是一种表示，根据目标状态的情况决定。有可能是小的，也有可能是大的。

- 极小极大算法就是对博弈树进行极小极大寻找。
选取每个节点下一个目标的最好状态。如：max选择极大值
使用简单的递归算法计算每个后继的极小极大值。
递归算法自上而下一直前进到树的叶节点，随着递归回溯通过搜索树把极小极大值回传
- 极小极大算法对博弈树进行完整的深度优先搜索。
- 多人博弈的极小极大算法

## Alpha Beta剪枝
以极小极大算法的形式遍历博弈树。最坏情况等于极小极大算法。
**Alpha Beta剪枝**是一种对极小极大算法的深度优化策略。能有效地将搜索空间减半。
**通过减少搜索空间提高效率**
> 当算法评估出某策略的后续走法比之前策略的还差时，就会停止计算该策略的后续发展。该算法和极小化极大算法所得结论相同，但剪去了不影响最终决定的分枝。

用另一种理解来表示：
> 对手发现可以给我们一个比我们当前可获得最大收益值更小的值时，触发剪枝。
> 我们发现可以获得一个比我们当前获得最小收益值更大的值时，触发剪枝。

**由于极小极大算法是深度优先的，所以任何时候都只需考虑树中某条单一路径上的节点**

## 评价函数（估值函数）
- 博弈程序严重依赖于估值函数
- 不准确的估值函数可能会导致Agent走向失败
设计思想：考虑状态不同的参数特征

引入期望概念进行情况估计。

## 随机博弈
引入**期望**的概念
引入**机会节点**概念，考虑平均概率更高的情况。
> 意味着在随机博弈的情况下，另一方无法知道我们在棋局中的标准博弈树

所以要引入期望概念
计算棋局的期望值来进行计算和估计。

## 蒙特卡洛搜索算法 MCTS
蒙特卡洛算法是一大类概率算法，它返回的是一系列解的近似。
> **蒙特卡罗方法**（英语：Monte Carlo method），也称**统计模拟方法**，是1940年代中期由于科学技术的发展和[电子计算机](https://zh.wikipedia.org/wiki/%E7%94%B5%E5%AD%90%E8%AE%A1%E7%AE%97%E6%9C%BA "电子计算机")的发明，而提出的一种以概率统计理论为指导的数值计算方法。是指使用[随机数](https://zh.wikipedia.org/wiki/%E9%9A%8F%E6%9C%BA%E6%95%B0 "随机数")（或更常见的[伪随机数](https://zh.wikipedia.org/wiki/%E4%BC%AA%E9%9A%8F%E6%9C%BA%E6%95%B0 "伪随机数")）来解决很多计算问题的方法。

- 置信度上界

- 将置信上界算法应用于博弈树的搜索中，即为蒙特卡洛搜索算法
- 选择 扩展 模拟 反向传播