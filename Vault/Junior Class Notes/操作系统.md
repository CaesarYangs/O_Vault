## Overview
操作系统概述
处理器管理
内存管理
文件系统
外设管理
操作系统体系结构

- 学堂在线-操作系统
- 实验内容
物理内存管理，虚拟内存管理，用户进程管理，调度器，同步互斥
- 考试周考试70%
- 4学分
- 理论课+实验课
---
## 1 绪论
### 1.1概念
裸机-操作系统-编译and编辑软件-各种应用软件
- 内核态：操作系统层级（最高权限）
- 用户态：软件+应用软件（基础权限）
	- 当cpu被操作系统的代码掌控时转为内核态
>  操作系统是一个资源管理模型

操作系统是计算机系统中的一个系统软件，它是这样一些程序模块的集合——它们管理和控制计算机系统中的硬件及软件资源，合理地组织计算机工作流程，以便有效地利用这些资源为用户提供一个功能强大、使用方便和可扩展的工作环境，从而在计算机与其用户之间起到接口的作用。

### 早期批处理
批处理-即将作业（Jobs）打包执行。 解决手工作业效率低的问题
>联机 脱机：指的是IO输入输出设备和主机之间
1. 联机批处理
慢速的IO设备和主机直接相连
- 解决了作业转接 减少了操作时间
- CPU串行等待 时间仍有很大浪费
2. 脱机批处理
**添加卫星机-不与主机直接相连而专门用于输入输出**
- 主机与卫星机并行工作
- 充分发挥主机的高速计算能力
- 促进了**监督程序**的发展
	- 编译 链接 输出
3. 执行系统阶段
通道（IO控制）和中断（随时响应请求）技术
**输入输出控制 编译 链接**——>***执行系统***

### 多道程序系统
批处理系统每次只调用一个用户作业程序进入内存并运行——*单道运行*
每次调用多个用户作业——*多道程序系统*
- 单处理器系统多道程序特点：
	1. 多道：内存中存放几道相互独立的程序。
	2. 宏观并行：内存中程序都在运行中，都没有结束。
	3. 微观串行：轮流使用CPU 交替执行。    *并发——交替执行*

- 分时操作系统——*实时在线 联机可交互*
提高了资源利用率和系统吞吐率 更高一级的人机交互需求被提出来
即时与作业交互+共享主机
- 实时操作系统——*快速*
- 通用操作系统
	- 实时作业——前台作业
	- 批处理——后台作业

- 分布式系统
使用统一操作系统 对用户透明

### 1.4 操作系统功能
- 处理机管理
> 处理机管理功能：针对多道程序或多用户情况，解决组织多个作业同时运行时面对的处理机分配调度策略、分配实施和资源回收等问题。

- CPU-
使用规则-执行
- 存储-
内存＆外存-分配 *保证系统及用户程序存储区互不冲突* 设置读写权限
存储保护 *保证用户程序不会破坏系统程序*
内存扩充 *把内存和外存结合起来管理 整合成虚拟存储器*

#### 设备管理
虚拟技术＆缓冲技术
#### 信息管理（文件系统管理）
子目录 逻辑形式文件系统 
应允许共享信息文件
#### 用户接口
程序一级接口：一组广义指令 供用户程序和其它系统调用
作业一级接口：Shell命令

#### 主要寄存器
1. 用户可编程寄存器
	1. 存储寄存器：内容为操作数，运算结果等信息。**对数据进行操作的任何机器指令都被允许访问数据寄存器。**
	2. 地址寄存器：**存放内存中某个数据或指令的地址，或某段数据与指令的入口地址**
2. 控制与状态寄存器
	1. 程序计数器PC：当前存放的要执行指令的地址
	2. 指令寄存器IR：存放当前正在执行的指令
	3. 状态寄存器：**体现当前指令执行结果的各种状态信息（条件码）**  条件码寄存器的比特位由处理机硬件设置。
	4. 中断现场保护寄存器：用于保存被中断程序的现场以便链接中断恢复处
	5. 过程调用堆栈：**存放过程调用时的调用名、调用参数、以及返回地址等。**
	6. 程序状态字PSW：**程序状态字指CPU一些重要寄存器内容的有序集合，能够反映程序运行状态**

#### 操作系统几种视角
- 计算机资源管理者
- 提供用户交互界面
- 进程管理者
> 进程是一个程序动态的执行过程

---
## 2 操作系统用户界面
应用程序用户or程序开发人员

### 作业及其输入输出
#### 作业
编辑编译链接执行——一个作业步
作业由不同的顺序相连的作业步组成
作业是比程序更广的概念
> 作业 = 程序+数据+作业说明书
> **在批处理系统中，作业是抢占内存的基本单位。也就是说，批处理系统以作业为单位把程序和数据调入内存以便执行。**

- 一个作业可以包含多个程序和多个数据集，但必须至少包含一个程序。否则不能称之为作业
- 作业中包含的程序和数据完成用户所要求的的业务处理工作
- **作业说明书体现用户的控制意图，主要包含：作业的基本描述、作业控制描述和资源要求描述。**

> **作业说明书在系统中生成一个称为作业控制块(job control block，JCB)** 以表格的形式存在

#### 作业输入输出方式
1. 联机输入方式
**外围设备直接和主机相连接。一台主机可以连接一台或多台外围设备。**
2. 脱机输入方式：
**脱机输入方式利用低档个人计算机作为外围处理机进行输入处理。**
3. 直接耦合方式
**把主机和外围低档机通过一个公用的大容量外存直接耦合起来**
4. SPOOLING方式
不直接对IO设备操作 使用通道对大型存储设备操作 解放CPU
5. 网络输入方式
涉及到计算机之间的通信

### 用户界面

#### 命令控制界面
- 脱机控制方式
	- 规定作业执行顺序 出错处理方法的作业控制程序
> 系统按照作业说明书或命令文件中规定的顺序控制作业执行
- 联机控制方式
	- 不要求提供作业说明书
> 用户使用系统提供的操作命令和系统会话，交互的控制程序执行和管理计算机系统

#### 系统调用
- 设备管理 存储管理 文件管理
>  进程是一个在功能上独立的、程序的一次执行过程。进程是一个动态的概念
- 进程控制
- 进程通信
- 线程管理

## 3 进程管理
现代操作系统围绕进程管理设计
> 现代操作系统特点：程序并发执行 系统资源共享 用户随机地使用系统

### 程序的并发执行
> 程序是一个在时间上严格次序前后相继操作的序列，是静态的概念

- 程序的顺序执行
> 一个具有独立功能的程序独占处理机直至最终结束的过程称为程序的顺序执行

- 顺序性：
程序顺序执行时，其执行过程可以看作一系列严格按程序规定的状态转移过程
- 封闭性：
程序执行得到的最终结果由给定的初始条件决定，不受外界因素影响
- 可再现性：
只要输入初始条件相同，无论何时执行该程序都会得到相同的结果
- 资源共享：
资源共享将导致对程序执行速度的制约
